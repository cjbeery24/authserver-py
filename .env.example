# =============================================================================
# Authentication Server Environment Configuration
# =============================================================================
# Copy this file to .env and update the values for your environment
# cp env.example .env

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME=Authentication Server
APP_VERSION=1.0.0
APP_ENV=development
DEBUG=true
LOG_LEVEL=DEBUG

# =============================================================================
# Server Configuration
# =============================================================================
HOST=0.0.0.0
PORT=8000
WORKERS=1
RELOAD=true

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL
DATABASE_URL=postgresql://username:password@localhost:5432/authserver
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=authserver
DATABASE_USER=
DATABASE_PASSWORD=

# Database Pool Settings
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_SSL=false

# =============================================================================
# Security & Authentication
# =============================================================================
# JWT Settings
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Security
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGITS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true

# MFA Settings
MFA_TOTP_ISSUER=AuthServer
MFA_TOTP_DIGITS=6
MFA_TOTP_PERIOD=30
MFA_BACKUP_CODES_COUNT=10
MFA_BACKUP_CODES_EXPIRY_DAYS=365

# =============================================================================
# OpenID Connect & OAuth 2.0
# =============================================================================
# OIDC Settings
OIDC_ISSUER_URL=http://localhost:8000
OIDC_JWKS_URI=http://localhost:8000/.well-known/jwks.json
OIDC_AUTHORIZATION_ENDPOINT=http://localhost:8000/oauth/authorize
OIDC_TOKEN_ENDPOINT=http://localhost:8000/oauth/token
OIDC_USERINFO_ENDPOINT=http://localhost:8000/oauth/userinfo
OIDC_INTROSPECTION_ENDPOINT=http://localhost:8000/oauth/introspect
OIDC_REVOCATION_ENDPOINT=http://localhost:8000/oauth/revoke

# OAuth 2.0 Settings
OAUTH2_CLIENT_ID=your-client-id
OAUTH2_CLIENT_SECRET=your-client-secret
OAUTH2_REDIRECT_URI=http://localhost:3000/callback

# PKCE Settings
PKCE_REQUIRED=true
PKCE_CODE_VERIFIER_MIN_LENGTH=43
PKCE_CODE_VERIFIER_MAX_LENGTH=128

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_REQUESTS_PER_DAY=10000

# =============================================================================
# Email Configuration (for password reset, etc.)
# =============================================================================
EMAIL_ENABLED=false
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=true
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=noreply@authserver.com

# =============================================================================
# Logging & Monitoring
# =============================================================================
LOG_FORMAT=json
LOG_FILE=logs/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# Health Check Settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# CORS Settings
# =============================================================================
CORS_ENABLED=true
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization
CORS_CREDENTIALS=true

# =============================================================================
# Audit & Compliance
# =============================================================================
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=7
AUDIT_LOG_LEVEL=INFO

# =============================================================================
# Development & Testing
# =============================================================================
# Test Database
TEST_DATABASE_URL=postgresql://authuser:authpass@localhost:5432/authserver_test
TEST_DATABASE_NAME=authserver_test

# Test Settings
TESTING=false
TEST_CLIENT_ID=test-client
TEST_CLIENT_SECRET=test-secret

# =============================================================================
# External Services (Optional)
# =============================================================================
# SMS Service (for MFA)
SMS_ENABLED=false
SMS_PROVIDER=twilio
SMS_ACCOUNT_SID=your-twilio-account-sid
SMS_AUTH_TOKEN=your-twilio-auth-token
SMS_FROM_NUMBER=+1234567890

# =============================================================================
# Notes
# =============================================================================
# 1. Change all secret keys and passwords in production
# 2. Use strong, unique passwords for database and external services
# 3. Consider using a secrets management service in production
# 4. Update URLs and endpoints to match your deployment environment
# 5. Enable email/SMS services only if needed for your use case
